<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Click this link</title>
  <style>
    body {
      font-size: 28px;
    }
    textarea {
      font-size: inherit;
      width: 100%;
    }
  </style>
</head>
<body>
  <h1>Spotify connected!</h1>
  <p>
    Here's your details:
  </p>
  <dl>
    <dt>Code</dt>
      <dd><textarea size="7" disabled id="code">...</textarea></dd>
    <dt>State</dt>
      <dd id="state">...</dd>
  </dl>
  <script>
  (function() {
    var code = document.getElementById('code')
        state = document.getElementById('state');

    code.innerText = getQueryVariable('code');
    state.innerText = new Date(getQueryVariable('state') * 1000);

    function getQueryVariable(variable)
    {
       var query = window.location.search.substring(1);
       var vars = query.split("&");
       for (var i=0;i<vars.length;i++) {
         var pair = vars[i].split("=");
         if (pair[0] == variable){
          return pair[1];
        }
       }
       return(false);
    }
  })();
  </script>
</body>
</html>
